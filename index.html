<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carta · Hamburguesería Gourmet</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
          colors: {
            brand: {
              50: '#fdf7f3', 100: '#fde8db', 200: '#fbd0b6', 300: '#f8b089', 400: '#f18656', 500: '#e86b2a', 600: '#cc571c', 700: '#a74419', 800: '#833718', 900: '#6b2e16'
            }
          },
          boxShadow: {
            soft: '0 10px 25px rgba(0,0,0,0.06)'
          }
        }
      }
    }
  </script>
  <style>
    html, body { height: 100%; }
    .glass { backdrop-filter: blur(8px); background: rgba(255,255,255,0.75); }
  </style>
</head>
<body class="min-h-screen bg-neutral-50 text-neutral-900 dark:bg-neutral-900 dark:text-neutral-100">
  <!-- HEADER / NAV -->
  <header class="sticky top-0 z-50 bg-white/90 dark:bg-neutral-900/80 backdrop-blur border-b border-neutral-200 dark:border-neutral-800">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-10 w-10 rounded-xl bg-brand-600 text-white grid place-items-center font-extrabold">HG</div>
        <div class="leading-tight">
          <h1 class="font-extrabold text-lg">Hamburguesería Gourmet</h1>
          <p class="text-xs text-neutral-500" id="subtitle">Carta interactiva · Solo comida</p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="themeToggle" class="px-3 py-2 rounded-xl border border-neutral-300 dark:border-neutral-700 hover:border-neutral-400 dark:hover:border-neutral-500 text-sm font-medium" aria-label="Cambiar tema">🌙 / ☀️</button>
        <label for="langSelect" id="langSelectLabel" class="sr-only">Idioma</label>
        <select id="langSelect" class="px-3 py-2 rounded-xl border border-neutral-300 dark:border-neutral-700 bg-white/80 dark:bg-neutral-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-brand-400" aria-label="Seleccionar idioma">
          <option value="es">Español</option>
          <option value="en">English</option>
          <option value="th">ไทย</option>
        </select>
        <button id="resetBtn" class="px-3 py-2 rounded-xl bg-neutral-900 dark:bg-neutral-100 dark:text-neutral-900 text-white text-sm font-semibold hover:bg-neutral-800">Reset</button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="relative">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-8 sm:py-12">
      <div class="grid md:grid-cols-2 gap-6 items-center">
        <div>
          <h2 class="text-3xl sm:text-4xl font-extrabold leading-tight" id="heroTitle">Clásicos de siempre, con mimo artesano</h2>
          <p class="mt-3 text-neutral-600 dark:text-neutral-300" id="heroText">Elige tu hamburguesa, añade o quita ingredientes a tu gusto. Cocina lenta, producto local, pan del día.</p>
          <ul class="mt-4 text-sm text-neutral-600 dark:text-neutral-300 list-disc list-inside" id="heroBullets">
            <li>Carne 160 g · opción <span class="font-semibold">veggie</span></li>
            <li>Pan brioche o sin gluten</li>
            <li>Quita/añade ingredientes en cada hamburguesa</li>
          </ul>
        </div>
        <div class="relative">
          <div class="rounded-3xl shadow-soft overflow-hidden">
            <img alt="Gourmet Burger" src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?q=80&w=1600&auto=format&fit=crop" class="w-full h-64 object-cover">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTENT -->
  <main class="max-w-6xl mx-auto px-4 sm:px-6 pb-24">
    <!-- TABS -->
    <nav class="mb-6 flex items-center gap-2" role="tablist">
      <button id="tabMenu" class="px-3 py-2 rounded-xl text-sm font-semibold bg-neutral-900 text-white dark:bg-neutral-100 dark:text-neutral-900" data-section="menu">🧾 <span id="tabMenuText">Carta</span></button>
      <button id="tabFAQ" class="px-3 py-2 rounded-xl text-sm font-semibold border border-neutral-300 dark:border-neutral-700" data-section="faq">❓ <span id="tabFAQText">FAQ</span></button>
      <button id="tabContact" class="px-3 py-2 rounded-xl text-sm font-semibold border border-neutral-300 dark:border-neutral-700" data-section="contact">📬 <span id="tabContactText">Contáctanos</span></button>
    </nav>

    <!-- SECTION: MENU -->
    <section id="section-menu">
      <div class="grid lg:grid-cols-[1fr,360px] gap-8">
        <!-- MENU GRID -->
        <section>
          <div class="flex items-end justify-between mb-4">
            <h3 class="text-2xl font-extrabold" id="menuTitle">Nuestra carta</h3>
            <div class="text-sm text-neutral-500 dark:text-neutral-400" id="menuHint">Pulsa “Personalizar” para añadir o quitar ingredientes</div>
          </div>
          <div id="menuGrid" class="grid sm:grid-cols-2 gap-6"></div>
        </section>

        <!-- SIDECART -->
        <aside class="lg:sticky lg:top-20 h-max">
          <div class="rounded-3xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 shadow-soft p-5">
            <div class="flex items-center justify-between">
              <h4 class="font-extrabold text-lg" id="cartTitle">Tu pedido</h4>
              <button id="clearCart" class="text-sm text-brand-700 hover:underline" aria-label="Vaciar">Vaciar</button>
            </div>
            <div id="cartEmpty" class="text-neutral-500 dark:text-neutral-400 text-sm mt-3" aria-live="polite">Aún no has añadido nada.</div>
            <ul id="cartList" class="divide-y divide-neutral-200 dark:divide-neutral-700 mt-2 hidden"></ul>
            <div class="mt-4 flex items-center justify-between">
              <span class="text-sm text-neutral-500 dark:text-neutral-400" id="cartSubtotalLabel">Subtotal</span>
              <span class="font-bold" id="cartSubtotal">0,00 €</span>
            </div>
            <button id="checkoutBtn" class="mt-4 w-full py-3 rounded-2xl bg-brand-600 text-white font-semibold hover:bg-brand-700 transition" aria-label="Finalizar">
              <span id="checkoutText">Finalizar pedido</span>
            </button>
            <p class="text-[11px] text-neutral-400 mt-2" id="legal">Precios con IGIC incluido. Fotos orientativas. No se venden bebidas en esta carta.</p>
          </div>
        </aside>
      </div>
    </section>

    <!-- SECTION: FAQ -->
    <section id="section-faq" class="hidden">
      <div class="rounded-3xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 shadow-soft p-6">
        <h3 class="text-2xl font-extrabold mb-4" id="faqTitle">Preguntas frecuentes</h3>
        <div id="faqList" class="divide-y divide-neutral-200 dark:divide-neutral-700"></div>
      </div>
    </section>

    <!-- SECTION: CONTACT -->
    <section id="section-contact" class="hidden">
      <div class="rounded-3xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 shadow-soft p-6">
        <h3 class="text-2xl font-extrabold mb-2" id="contactTitle">Contáctanos</h3>
        <p class="text-neutral-600 dark:text-neutral-300 mb-4" id="contactSubtitle">Estamos aquí para ayudarte.</p>
        <div class="grid sm:grid-cols-2 gap-6">
          <div>
            <ul class="space-y-2 text-sm">
              <li><strong id="lblAddress">Dirección:</strong> <span id="valAddress">Calle Sabores 27, Local 3 · 38400 Puerto de la Cruz, Tenerife</span></li>
              <li><strong id="lblPhone">Teléfono:</strong> <span id="valPhone">+34 822 123 456</span></li>
              <li><strong id="lblEmail">Email:</strong> <span id="valEmail">hola@hamburgueseriagourmet.es</span></li>
              <li><strong id="lblHours">Horario:</strong> <span id="valHours">L–J 13:00–22:00 · V–S 13:00–23:30 · D 13:00–22:30</span></li>
            </ul>
          </div>
          <div class="space-y-4">
            <div class="rounded-2xl border border-dashed border-neutral-300 dark:border-neutral-700 p-4 text-sm text-neutral-600 dark:text-neutral-300" id="contactNote">Para reservas y grupos, indícanos fecha, hora y número de personas. Te responderemos lo antes posible.</div>
            <div class="rounded-2xl border border-neutral-200 dark:border-neutral-700 bg-neutral-50/70 dark:bg-neutral-900/60 p-4">
              <h4 class="font-semibold text-neutral-900 dark:text-neutral-100" id="faxTitle">Fax gourmet</h4>
              <p class="text-sm text-neutral-600 dark:text-neutral-300 mt-1" id="faxSubtitle">Para quienes disfrutan del encanto analógico.</p>
              <ul class="mt-3 space-y-1 text-sm">
                <li><strong id="lblFax">Fax:</strong> <span id="valFax">+34 822 654 321</span></li>
                <li><strong id="lblFaxHours">Horario fax:</strong> <span id="valFaxHours">24/7 con desvío automático</span></li>
              </ul>
              <p class="text-xs text-neutral-500 dark:text-neutral-400 mt-3" id="faxNote">Procesamos los pedidos recibidos por fax cada hora y confirmamos por teléfono.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="border-t border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6 text-xs text-neutral-500 flex flex-wrap items-center gap-x-3 gap-y-1">
      <span>© <span id="year"></span> Hamburguesería Gourmet.</span>
      <span aria-hidden>•</span>
      <span id="footerNote">Hecho con ingredientes reales y cariño tradicional.</span>
    </div>
  </footer>

  <script>
    // ===== i18n =====
    const i18n = {
      es: {
        subtitle: 'Carta interactiva · Solo comida',
        heroTitle: 'Clásicos de siempre, con mimo artesano',
        heroText: 'Elige tu hamburguesa, añade o quita ingredientes a tu gusto. Cocina lenta, producto local, pan del día.',
        heroBullets: [
          'Carne 160 g · opción veggie',
          'Pan brioche o sin gluten',
          'Quita/añade ingredientes en cada hamburguesa'
        ],
        menuTitle: 'Nuestra carta',
        menuHint: 'Pulsa “Personalizar” para añadir o quitar ingredientes',
        customize: 'Personalizar',
        remove: 'Quitar',
        include: 'Incluir',
        extras: 'Extras',
        base: 'Base',
        addToCart: 'Añadir al pedido',
        added: 'Añadido',
        cartTitle: 'Tu pedido',
        cartEmpty: 'Aún no has añadido nada.',
        cartSubtotalLabel: 'Subtotal',
        checkout: 'Finalizar pedido',
        legal: 'Precios con IGIC incluido. Fotos orientativas. No se venden bebidas en esta carta.',
        veggieLabel: 'Disponible versión veggie',
        glutenFree: 'Pan sin gluten',
        brioche: 'Pan brioche',
        qty: 'Ud',
        pieces: 'uds',
        reset: 'Reset',
        clearCart: 'Vaciar',
        footerNote: 'Hecho con ingredientes reales y cariño tradicional.',
        tabMenu: 'Carta',
        tabFAQ: 'FAQ',
        tabContact: 'Contáctanos',
        faqTitle: 'Preguntas frecuentes',
        faqs: [
          { q: '¿Puedo pedir versión vegetariana?', a: 'Sí. Casi todas las hamburguesas tienen opción veggie: sustitución de carne por heura o patty vegetal.' },
          { q: '¿Tienen pan sin gluten?', a: 'Sí. Indícalo al personal o en la personalización: pan sin gluten disponible.' },
          { q: '¿El precio cambia al quitar ingredientes?', a: 'Quitar ingredientes base no cambia el precio; los extras sí lo aumentan según su coste.' },
          { q: '¿Hacen entregas a domicilio?', a: 'De momento solo recogida en local. Pronto activaremos reparto en zona cercana.' }
        ],
        contactTitle: 'Contáctanos',
        contactSubtitle: 'Estamos aquí para ayudarte.',
        lblAddress: 'Dirección:',
        lblPhone: 'Teléfono:',
        lblEmail: 'Email:',
        lblHours: 'Horario:',
        contactNote: 'Para reservas y grupos, indícanos fecha, hora y número de personas. Te responderemos lo antes posible.',
        themeToggle: 'Cambiar tema',
        themeLight: 'Modo claro',
        themeDark: 'Modo oscuro',
        langSelectLabel: 'Seleccionar idioma',
        faxTitle: 'Fax gourmet',
        faxSubtitle: 'Para quienes disfrutan del encanto analógico.',
        lblFax: 'Fax:',
        lblFaxHours: 'Horario fax:',
        faxNote: 'Procesamos los pedidos recibidos por fax cada hora y confirmamos por teléfono.',
        faxHoursValue: '24/7 con desvío automático',
        orderSummaryTitle: 'Resumen de pedido',
        emptyCartAlert: 'Tu pedido está vacío.'
      },
      en: {
        subtitle: 'Interactive menu · Food only',
        heroTitle: 'Timeless classics, crafted with care',
        heroText: 'Pick your burger, add or remove ingredients as you like. Slow cooking, local produce, daily-baked buns.',
        heroBullets: [
          '160 g beef · veggie option',
          'Brioche or gluten-free bun',
          'Add/remove ingredients per burger'
        ],
        menuTitle: 'Our menu',
        menuHint: 'Tap “Customize” to add or remove ingredients',
        customize: 'Customize',
        remove: 'Remove',
        include: 'Include',
        extras: 'Extras',
        base: 'Base',
        addToCart: 'Add to order',
        added: 'Added',
        cartTitle: 'Your order',
        cartEmpty: "You haven't added anything yet.",
        cartSubtotalLabel: 'Subtotal',
        checkout: 'Checkout',
        legal: 'Prices include tax. Photos are illustrative. Drinks not sold in this menu.',
        veggieLabel: 'Veggie version available',
        glutenFree: 'Gluten-free bun',
        brioche: 'Brioche bun',
        qty: 'Qty',
        pieces: 'pcs',
        reset: 'Reset',
        clearCart: 'Clear',
        footerNote: 'Made with real ingredients and traditional care.',
        tabMenu: 'Menu',
        tabFAQ: 'FAQ',
        tabContact: 'Contact us',
        faqTitle: 'Frequently asked questions',
        faqs: [
          { q: 'Can I order a vegetarian option?', a: 'Yes. Most burgers can go veggie by swapping beef for a plant-based patty.' },
          { q: 'Do you offer gluten-free buns?', a: 'Yes. Choose the gluten-free bun during customization or tell our staff.' },
          { q: 'Does price change if I remove ingredients?', a: 'Removing base ingredients does not change the price; extras increase it as listed.' },
          { q: 'Do you deliver?', a: 'Currently pickup only. Local delivery coming soon.' }
        ],
        contactTitle: 'Contact us',
        contactSubtitle: 'We are here to help.',
        lblAddress: 'Address:',
        lblPhone: 'Phone:',
        lblEmail: 'Email:',
        lblHours: 'Hours:',
        contactNote: 'For reservations and groups, tell us date, time and party size. We will reply shortly.',
        themeToggle: 'Toggle theme',
        themeLight: 'Light mode',
        themeDark: 'Dark mode',
        langSelectLabel: 'Select language',
        faxTitle: 'Gourmet fax',
        faxSubtitle: 'For anyone who loves analogue charm.',
        lblFax: 'Fax:',
        lblFaxHours: 'Fax hours:',
        faxNote: 'We review faxed orders every hour and confirm by phone.',
        faxHoursValue: '24/7 with auto forwarding',
        orderSummaryTitle: 'Order summary',
        emptyCartAlert: 'Your order is empty.'
      },
      th: {
        subtitle: 'เมนูอินเทอร์แอคทีฟ · เฉพาะอาหาร',
        heroTitle: 'คลาสสิกเหนือกาลเวลา ปรุงอย่างพิถีพิถัน',
        heroText: 'เลือกเบอร์เกอร์ของคุณ เพิ่มหรือลดส่วนผสมได้ตามใจ สโลว์คุกกิง วัตถุดิบท้องถิ่น ขนมปังอบสดใหม่ทุกวัน.',
        heroBullets: [
          'เนื้อวัว 160 กรัม · มีตัวเลือกมังสวิรัติ',
          'ขนมปังบริยอชหรือปราศจากกลูเตน',
          'ปรับส่วนผสมของแต่ละเบอร์เกอร์ได้'
        ],
        menuTitle: 'เมนูของเรา',
        menuHint: 'กด “ปรับแต่ง” เพื่อเพิ่มหรือลดส่วนผสม',
        customize: 'ปรับแต่ง',
        remove: 'นำออก',
        include: 'คงไว้',
        extras: 'ท็อปปิ้งพิเศษ',
        base: 'ส่วนผสมหลัก',
        addToCart: 'เพิ่มในคำสั่ง',
        added: 'เพิ่มแล้ว',
        cartTitle: 'คำสั่งของคุณ',
        cartEmpty: 'คุณยังไม่ได้เพิ่มอะไรเลย.',
        cartSubtotalLabel: 'ยอดรวม',
        checkout: 'ชำระเงิน',
        legal: 'ราคารวมภาษีแล้ว ภาพเพื่อการประกอบเท่านั้น เมนูนี้ไม่มีเครื่องดื่ม.',
        veggieLabel: 'มีตัวเลือกมังสวิรัติ',
        glutenFree: 'ขนมปังปราศจากกลูเตน',
        brioche: 'ขนมปังบริยอช',
        qty: 'จำนวน',
        pieces: 'ชิ้น',
        reset: 'รีเซ็ต',
        clearCart: 'ล้าง',
        footerNote: 'รังสรรค์จากวัตถุดิบจริงและความใส่ใจแบบดั้งเดิม.',
        tabMenu: 'เมนู',
        tabFAQ: 'คำถามที่พบบ่อย',
        tabContact: 'ติดต่อเรา',
        faqTitle: 'คำถามที่พบบ่อย',
        faqs: [
          { q: 'สามารถสั่งแบบมังสวิรัติได้ไหม?', a: 'ได้ค่ะ เกือบทุกเมนูสามารถเปลี่ยนเป็นแพตตีโปรตีนจากพืชแทนเนื้อวัวได้.' },
          { q: 'มีขนมปังปลอดกลูเตนไหม?', a: 'มีค่ะ เลือกในขั้นตอนการปรับแต่งหรือแจ้งพนักงานของเราได้เลย.' },
          { q: 'ราคาจะเปลี่ยนไหมถ้านำส่วนผสมออก?', a: 'การนำส่วนผสมพื้นฐานออกไม่กระทบราคา ส่วนท็อปปิ้งพิเศษจะคิดเพิ่มตามที่ระบุ.' },
          { q: 'มีบริการส่งถึงบ้านหรือเปล่า?', a: 'ตอนนี้ให้บริการรับหน้าร้านเท่านั้น กำลังเตรียมบริการส่งในพื้นที่ใกล้เคียง.' }
        ],
        contactTitle: 'ติดต่อเรา',
        contactSubtitle: 'เราพร้อมช่วยเหลือคุณเสมอ.',
        lblAddress: 'ที่อยู่:',
        lblPhone: 'โทรศัพท์:',
        lblEmail: 'อีเมล:',
        lblHours: 'เวลาเปิดทำการ:',
        contactNote: 'สำหรับการจองและกลุ่มใหญ่ โปรดแจ้งวัน เวลา และจำนวนคน แล้วเราจะติดต่อกลับโดยเร็ว.',
        themeToggle: 'สลับธีม',
        themeLight: 'โหมดสว่าง',
        themeDark: 'โหมดมืด',
        langSelectLabel: 'เลือกภาษา',
        faxTitle: 'แฟกซ์กูร์เมต์',
        faxSubtitle: 'สำหรับคนที่ชอบเสน่ห์แบบอนาล็อก.',
        lblFax: 'แฟกซ์:',
        lblFaxHours: 'เวลารับแฟกซ์:',
        faxNote: 'เราตรวจแฟกซ์ทุกชั่วโมงและยืนยันกลับทางโทรศัพท์.',
        faxHoursValue: 'เปิดรับตลอด 24 ชั่วโมง พร้อมโอนสายอัตโนมัติ',
        orderSummaryTitle: 'สรุปคำสั่งซื้อ',
        emptyCartAlert: 'คำสั่งซื้อของคุณยังว่างอยู่.'
      }
    };

    // ===== Data (8 burgers) =====
    const BURGERS = [
      {
        id: 'hb1',
        name: { es: 'Clásica', en: 'Classic', th: 'คลาสสิก' },
        desc: {
          es: 'Carne 160 g, queso cheddar, lechuga, tomate, cebolla, salsa de la casa.',
          en: '160 g beef, cheddar, lettuce, tomato, onion, house sauce.',
          th: 'เนื้อวัว 160 กรัม ชีสเชดดาร์ ผักกาด มะเขือเทศ หัวหอม และซอสโฮมเมด.'
        },
        price: 8.9,
        base: ['cheddar','lechuga','tomate','cebolla','salsa de la casa'],
        extras: [ ['bacon',1.2], ['doble cheddar',1.0], ['huevo',1.1], ['pepino',0.5] ],
        tags: ['brioche','veggie']
      },
      {
        id: 'hb2',
        name: { es: 'BBQ Ahumada', en: 'Smoky BBQ', th: 'สโมกกี้ บีบีคิว' },
        desc: {
          es: 'Carne 160 g, bacon, cheddar, cebolla crispy y salsa BBQ.',
          en: '160 g beef, bacon, cheddar, crispy onions & BBQ.',
          th: 'เนื้อวัว 160 กรัม เบคอน เชดดาร์ หัวหอมกรอบ และซอสบาร์บีคิว.'
        },
        price: 10.5,
        base: ['bacon','cheddar','cebolla crispy','salsa BBQ'],
        extras: [ ['doble carne',2.5], ['jalapeños',0.6], ['queso gouda',0.9] ],
        tags: ['brioche']
      },
      {
        id: 'hb3',
        name: { es: 'Trufa & Brie', en: 'Truffle & Brie', th: 'ทรัฟเฟิล & บรี' },
        desc: {
          es: 'Carne 160 g, brie, champiñón salteado, rúcula, mayo trufada.',
          en: '160 g beef, brie, sautéed mushrooms, arugula, truffle mayo.',
          th: 'เนื้อวัว 160 กรัม ชีสบรี เห็ดผัด ร็อกเก็ต และมายองเนสกลิ่นทรัฟเฟิล.'
        },
        price: 12.8,
        base: ['brie','champiñón','rúcula','mayo trufada'],
        extras: [ ['cebolla caramelizada',0.8], ['doble brie',1.4] ],
        tags: ['brioche','veggie']
      },
      {
        id: 'hb4',
        name: { es: 'Pico de Gallo', en: 'Pico de Gallo', th: 'ปิโก เด กัลโล' },
        desc: {
          es: 'Carne 160 g, cheddar, pico de gallo, jalapeños, cilantro.',
          en: '160 g beef, cheddar, pico de gallo, jalapeños, cilantro.',
          th: 'เนื้อวัว 160 กรัม เชดดาร์ พิโก เด กัลโล ฮาลาเปญโญ่ และผักชี.'
        },
        price: 11.2,
        base: ['cheddar','pico de gallo','jalapeños','cilantro'],
        extras: [ ['guacamole',1.3], ['nachos crujientes',0.7] ],
        tags: ['brioche']
      },
      {
        id: 'hb5',
        name: { es: 'Azul & Nuez', en: 'Blue & Walnut', th: 'บลู & วอลนัต' },
        desc: {
          es: 'Carne 160 g, queso azul, nuez tostada, canónigos, pera.',
          en: '160 g beef, blue cheese, toasted walnut, lamb’s lettuce, pear.',
          th: 'เนื้อวัว 160 กรัม ชีสบลู วอลนัตอบ แลมบ์สเลททูซ และลูกแพร์.'
        },
        price: 12.2,
        base: ['queso azul','nuez','canónigos','pera'],
        extras: [ ['miel',0.5], ['bacon',1.2] ],
        tags: ['brioche']
      },
      {
        id: 'hb6',
        name: { es: 'Veggie Crispy', en: 'Veggie Crispy', th: 'เวจจี้ คริสปี้' },
        desc: {
          es: 'Heura / veggie patty, lechuga, tomate, pepinillo, vegan mayo.',
          en: 'Heura / veggie patty, lettuce, tomato, pickles, vegan mayo.',
          th: 'แพตตีจากพืช Heura/มังสวิรัติ ผักกาด มะเขือเทศ แตงกวาดอง และมายองเนสมังสวิรัติ.'
        },
        price: 10.9,
        base: ['lechuga','tomate','pepinillo','mayo vegana'],
        extras: [ ['aguacate',1.2], ['cebolla roja',0.4] ],
        tags: ['veggie','gluten-free']
      },
      {
        id: 'hb7',
        name: { es: 'Canaria', en: 'Canarian', th: 'คานาเรียน' },
        desc: {
          es: 'Carne 160 g, queso palmero, mojo suave, papa chips.',
          en: '160 g beef, Palmero cheese, mild mojo, crisp potato.',
          th: 'เนื้อวัว 160 กรัม ชีสปาล์เมโร โมโฆรสอ่อน และมันฝรั่งกรอบ.'
        },
        price: 11.6,
        base: ['queso palmero','mojo suave','papa chips'],
        extras: [ ['gofio crujiente',0.6], ['cebolla',0.3] ],
        tags: ['brioche']
      },
      {
        id: 'hb8',
        name: { es: 'Pepper Jack', en: 'Pepper Jack', th: 'เปปเปอร์แจ็ค' },
        desc: {
          es: 'Carne 160 g, pepper jack, pepinillos, mostaza dulce.',
          en: '160 g beef, pepper jack, pickles, sweet mustard.',
          th: 'เนื้อวัว 160 กรัม ชีสเปปเปอร์แจ็ค แตงกวาดอง และมัสตาร์ดหวาน.'
        },
        price: 10.8,
        base: ['pepper jack','pepinillos','mostaza dulce'],
        extras: [ ['doble queso',1.0], ['huevo',1.1], ['bacon',1.2] ],
        tags: ['brioche']
      }
    ];

    // ===== Utilities =====
    const fmt = n => new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(n);
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    const storedLang = localStorage.getItem('lang');
    const initialLang = (storedLang && i18n[storedLang]) ? storedLang : 'es';

    const state = {
      lang: initialLang,
      cart: []
    };

    document.documentElement.setAttribute('lang', state.lang);

    // ===== Render Helpers =====
    function renderStaticText() {
      const t = i18n[state.lang];
      document.documentElement.setAttribute('lang', state.lang);
      $('#subtitle').textContent = t.subtitle;
      $('#heroTitle').textContent = t.heroTitle;
      $('#heroText').textContent = t.heroText;
      const hb = $('#heroBullets');
      hb.innerHTML = '';
      t.heroBullets.forEach(b => {
        const li = document.createElement('li');
        li.textContent = b;
        hb.appendChild(li);
      });
      $('#menuTitle').textContent = t.menuTitle;
      $('#menuHint').textContent = t.menuHint;
      $('#cartTitle').textContent = t.cartTitle;
      $('#cartEmpty').textContent = t.cartEmpty;
      $('#cartSubtotalLabel').textContent = t.cartSubtotalLabel;
      $('#checkoutText').textContent = t.checkout;
      $('#legal').textContent = t.legal;
      $('#resetBtn').textContent = t.reset;
      $('#clearCart').textContent = t.clearCart;
      $('#footerNote').textContent = t.footerNote;
      $('#tabMenuText').textContent = t.tabMenu;
      $('#tabFAQText').textContent = t.tabFAQ;
      $('#tabContactText').textContent = t.tabContact;
      $('#faqTitle').textContent = t.faqTitle;
      $('#contactTitle').textContent = t.contactTitle;
      $('#contactSubtitle').textContent = t.contactSubtitle;
      $('#lblAddress').textContent = t.lblAddress;
      $('#lblPhone').textContent = t.lblPhone;
      $('#lblEmail').textContent = t.lblEmail;
      $('#lblHours').textContent = t.lblHours;
      $('#contactNote').textContent = t.contactNote;
      $('#faxTitle').textContent = t.faxTitle;
      $('#faxSubtitle').textContent = t.faxSubtitle;
      $('#lblFax').textContent = t.lblFax;
      $('#lblFaxHours').textContent = t.lblFaxHours;
      $('#faxNote').textContent = t.faxNote;
      $('#valFaxHours').textContent = t.faxHoursValue;
      const langLabel = $('#langSelectLabel');
      if (langLabel) {
        langLabel.textContent = t.langSelectLabel;
      }
      const langSelect = $('#langSelect');
      if (langSelect) {
        langSelect.value = state.lang;
        langSelect.setAttribute('aria-label', t.langSelectLabel);
      }
      const themeToggle = $('#themeToggle');
      if (themeToggle) {
        themeToggle.setAttribute('aria-label', t.themeToggle);
      }
      updateThemeToggleLabel();
      renderFAQ();
    }

    function renderMenu() {
      const t = i18n[state.lang];
      const grid = $('#menuGrid');
      grid.innerHTML = '';

      BURGERS.forEach(b => {
        const card = document.createElement('article');
        card.className = 'rounded-3xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 shadow-soft overflow-hidden flex flex-col';
        card.innerHTML = `
          <div class="p-5">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h4 class="font-extrabold text-lg">${b.name[state.lang]}</h4>
                <p class="text-sm text-neutral-600 mt-1">${b.desc[state.lang]}</p>
                <div class="mt-2 flex gap-2 flex-wrap">${b.tags.map(tag => tagLabel(tag)).join('')}</div>
              </div>
              <div class="text-right">
                <div class="text-xl font-extrabold text-neutral-900" data-price> ${fmt(b.price)} </div>
                <div class="text-xs text-neutral-500">${t.base}</div>
              </div>
            </div>
            <button class="mt-3 text-sm font-semibold text-brand-700 hover:underline" data-toggle>🔧 ${t.customize}</button>

            <div class="mt-3 hidden" data-panel>
              <div class="rounded-2xl border border-neutral-200 p-4">
                <div class="grid sm:grid-cols-2 gap-4">
                  <div>
                    <div class="text-xs uppercase text-neutral-500 tracking-wide">${t.base}</div>
                    <div class="mt-2 space-y-2" data-base-list></div>
                  </div>
                  <div>
                    <div class="text-xs uppercase text-neutral-500 tracking-wide">${t.extras}</div>
                    <div class="mt-2 space-y-2" data-extras-list></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-auto px-5 pb-5">
            <button class="w-full py-3 rounded-2xl bg-neutral-900 text-white font-semibold hover:bg-neutral-800 transition" data-add>${t.addToCart}</button>
          </div>
        `;

        const baseWrap = card.querySelector('[data-base-list]');
        const extrasWrap = card.querySelector('[data-extras-list]');
        const selectedBase = new Set(b.base);
        const selectedExtras = new Set();

        b.base.forEach(ing => {
          const id = `${b.id}-b-${ing}`;
          const row = document.createElement('label');
          row.className = 'flex items-center justify-between gap-3 rounded-xl border border-neutral-200 px-3 py-2 hover:bg-neutral-50';
          row.innerHTML = `
            <div class="flex items-center gap-2">
              <input type="checkbox" id="${id}" checked class="h-4 w-4 rounded border-neutral-300">
              <span class="text-sm">${ing}</span>
            </div>
            <span class="text-xs text-neutral-500">${i18n[state.lang].include}</span>
          `;
          row.querySelector('input').addEventListener('change', (e) => {
            if (e.target.checked) selectedBase.add(ing); else selectedBase.delete(ing);
            updatePrice();
          });
          baseWrap.appendChild(row);
        });

        b.extras.forEach(([ing, p]) => {
          const id = `${b.id}-e-${ing}`;
          const row = document.createElement('label');
          row.className = 'flex items-center justify-between gap-3 rounded-xl border border-neutral-200 px-3 py-2 hover:bg-neutral-50';
          row.innerHTML = `
            <div class="flex items-center gap-2">
              <input type="checkbox" id="${id}" class="h-4 w-4 rounded border-neutral-300">
              <span class="text-sm">${ing}</span>
            </div>
            <span class="text-xs text-neutral-600 font-medium">+ ${fmt(p)}</span>
          `;
          row.querySelector('input').addEventListener('change', (e) => {
            if (e.target.checked) selectedExtras.add(ing); else selectedExtras.delete(ing);
            updatePrice();
          });
          extrasWrap.appendChild(row);
        });

        card.querySelector('[data-toggle]').addEventListener('click', () => {
          card.querySelector('[data-panel]').classList.toggle('hidden');
        });

        card.querySelector('[data-add]').addEventListener('click', (e) => {
          e.currentTarget.disabled = true;
          e.currentTarget.textContent = i18n[state.lang].added + ' ✓';
          setTimeout(() => {
            e.currentTarget.disabled = false;
            e.currentTarget.textContent = i18n[state.lang].addToCart;
          }, 900);

          const priceNow = calcPrice();
          state.cart.push({
            id: b.id,
            name: b.name[state.lang],
            price: priceNow,
            base: Array.from(selectedBase),
            extras: Array.from(selectedExtras)
          });
          renderCart();
        });

        function calcPrice() {
          const extrasTotal = b.extras
            .filter(([ing]) => selectedExtras.has(ing))
            .reduce((acc, [,p]) => acc + p, 0);
          return +(b.price + extrasTotal).toFixed(2);
        }

        function updatePrice() {
          card.querySelector('[data-price]').textContent = fmt(calcPrice());
        }

        grid.appendChild(card);
      });
    }

    function tagLabel(tag) {
      const t = i18n[state.lang];
      const map = {
        'brioche': t.brioche,
        'gluten-free': t.glutenFree,
        'veggie': t.veggieLabel
      };
      const text = map[tag] || tag;
      return `<span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-neutral-100 border border-neutral-200">${text}</span>`;
    }

    function renderCart() {
      const t = i18n[state.lang];
      const list = $('#cartList');
      const empty = $('#cartEmpty');
      list.innerHTML = '';

      if (state.cart.length === 0) {
        empty.classList.remove('hidden');
        list.classList.add('hidden');
      } else {
        empty.classList.add('hidden');
        list.classList.remove('hidden');
      }

      let subtotal = 0;
      state.cart.forEach((item, idx) => {
        subtotal += item.price;
        const li = document.createElement('li');
        li.className = 'py-3 flex items-start justify-between gap-3';
        li.innerHTML = `
          <div>
            <div class="font-semibold">${item.name}</div>
            <div class="text-xs text-neutral-600 mt-1">${i18n[state.lang].base}: ${item.base.join(', ') || '—'}</div>
            <div class="text-xs text-neutral-600">${i18n[state.lang].extras}: ${item.extras.join(', ') || '—'}</div>
          </div>
          <div class="text-right">
            <div class="font-bold">${fmt(item.price)}</div>
            <button class="text-xs text-brand-700 hover:underline mt-1" data-remove="${idx}">${i18n[state.lang].remove}</button>
          </div>
        `;
        list.appendChild(li);
      });

      $('#cartSubtotal').textContent = fmt(subtotal);

      $$('#cartList [data-remove]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const i = +e.currentTarget.getAttribute('data-remove');
          state.cart.splice(i,1);
          renderCart();
        });
      });
    }

    function renderFAQ() {
      const list = $('#faqList');
      if (!list) return;
      const t = i18n[state.lang];
      list.innerHTML = '';
      t.faqs.forEach(({q,a}, idx) => {
        const item = document.createElement('div');
        item.className = 'py-3';
        item.innerHTML = `
          <button class="w-full text-left flex items-center justify-between gap-3 font-semibold" aria-expanded="false" data-acc="${idx}">
            <span>${q}</span>
            <span>▾</span>
          </button>
          <div class="mt-2 hidden text-sm text-neutral-600 dark:text-neutral-300" data-panel="${idx}">${a}</div>
        `;
        list.appendChild(item);
      });
      $$('#faqList [data-acc]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const id = e.currentTarget.getAttribute('data-acc');
          const panel = $(`#faqList [data-panel="${id}"]`);
          panel.classList.toggle('hidden');
          const exp = e.currentTarget.getAttribute('aria-expanded') === 'true';
          e.currentTarget.setAttribute('aria-expanded', String(!exp));
        });
      });
    }

    function setLang(lang) {
      if (!i18n[lang]) lang = 'es';
      state.lang = lang;
      localStorage.setItem('lang', lang);
      renderStaticText();
      renderMenu();
      renderCart();
    }

    function setActiveSection(key) {
      const sections = ['menu','faq','contact'];
      sections.forEach(s => {
        $('#section-' + s).classList.toggle('hidden', s !== key);
      });
      $('#tabMenu').classList.toggle('bg-neutral-900', key==='menu');
      $('#tabMenu').classList.toggle('text-white', key==='menu');
      $('#tabMenu').classList.toggle('dark:bg-neutral-100', key==='menu');
      $('#tabMenu').classList.toggle('dark:text-neutral-900', key==='menu');

      ['FAQ','Contact'].forEach(name => {
        const id = name === 'FAQ' ? 'tabFAQ' : 'tabContact';
        const active = (name==='FAQ' && key==='faq') || (name==='Contact' && key==='contact');
        const el = $('#' + id);
        el.classList.toggle('bg-neutral-900', active);
        el.classList.toggle('text-white', active);
        el.classList.toggle('dark:bg-neutral-100', active);
        el.classList.toggle('dark:text-neutral-900', active);
        el.classList.toggle('border', !active);
      });
    }

    function applyTheme(theme) {
      if (theme === 'dark') document.documentElement.classList.add('dark');
      else document.documentElement.classList.remove('dark');
    }

    function initTheme() {
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = saved || (prefersDark ? 'dark' : 'light');
      applyTheme(theme);
    }

    function currentTheme() {
      return document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    }

    function updateThemeToggleLabel() {
      const btn = $('#themeToggle');
      if (!btn) return;
      const t = i18n[state.lang];
      if (currentTheme() === 'dark') {
        btn.textContent = `☀️ ${t.themeLight}`;
      } else {
        btn.textContent = `🌙 ${t.themeDark}`;
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      $('#year').textContent = new Date().getFullYear();
      initTheme();
      renderStaticText();
      renderMenu();
      renderCart();

      $('#tabMenu').addEventListener('click', () => setActiveSection('menu'));
      $('#tabFAQ').addEventListener('click', () => setActiveSection('faq'));
      $('#tabContact').addEventListener('click', () => setActiveSection('contact'));
      setActiveSection('menu');

      const langSelect = $('#langSelect');
      if (langSelect) {
        langSelect.value = state.lang;
        langSelect.addEventListener('change', (e) => setLang(e.target.value));
      }

      $('#themeToggle').addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        updateThemeToggleLabel();
      });

      $('#resetBtn').addEventListener('click', () => { localStorage.clear(); location.reload(); });
      $('#clearCart').addEventListener('click', () => { state.cart = []; renderCart(); });
      $('#checkoutBtn').addEventListener('click', () => {
        const t = i18n[state.lang];
        if (state.cart.length === 0) return alert(t.emptyCartAlert);
        const lines = state.cart.map((it, i) => `${i+1}. ${it.name} → ${fmt(it.price)}\n  - ${t.base}: ${it.base.join(', ') || '—'}\n  - ${t.extras}: ${it.extras.join(', ') || '—'}`).join('\n\n');
        alert(`${t.orderSummaryTitle}\n\n${lines}\n\n${t.cartSubtotalLabel}: ${$('#cartSubtotal').textContent}`);
      });

      updateThemeToggleLabel();
    });
  </script>
</body>
</html>
